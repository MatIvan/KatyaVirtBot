# Как написать плагин для Кати.
Катя - это телеграм бот, для которого, ты можешь написать свой плагин!  
План такой:  
1. Ты пишешь свой сервер и слушаешь любой порт.
2. Ты пишешь json с фильтром сообщений, чтобы Катя присылала тебе не все сообщения из чата, а только нужные.
3. Когда Катя увидит в чате нужное сообщение, он пришлет его тебе на твой порт.
4. Ты присылаешь Кате новый текст, который она опубликует в чате от имени Кати.

## Твой сервер
Любой микросервис на любом языке, который слушает порт и отправляет запрос в Катю. Я подниму этот микросервис у себя на сервисе и он сможет общаться с Катей.

## Фильтр JSON
Ты должен написать фильтр. Пример:
```json
{
    "chatName": "COMMON",
    "contains": [
        "Катя",
        "Кате",
        "Катю",
        "Катей"
    ],
    "startWith": ["/DEMO"],
    "caseSensitive": true
}
```
где,
* chatName - условное имя чата. Эти имена создаю я и привязываю их к чатам в телеге. Сейчас Катя знает два чата: COMMON - это палата-406 и MATIV - это моя личка с Катей.
* contains - массив слов, которые содержатся в сообщении.
* startWith - массив слов, с которых сообщение начинается.
* caseSensitive - чувствительность к регистру.

Этот фильтр надо прислать мне, я его подсуну Кате и она начнет отправлять на твой микросервис все сообщения из чатов, которые подходят по фильтру.

Вообще Катя умеет принимать фильтры и без меня. Есть спечиальное RESTful апи для фильтров (webhook). Но сейчас мой сервак закрыт от внешнего мира, пока что...

# Отправить текст от имени Кати в чат
Когда захочешь писать плагин, я дам тебе токен. Этот токен надо вставить в хеадеры запроса. Иначе Катя не примет запрос.
  
Отправить можно даже курлом:
```bash
curl -X POST "http://localhost:8888/send" \
    -H "Authorization: Token DEVTOKEN" \
    -H "Content-Type: application/json" \
    -d '{
         "message":"hello world", 
         "chatName":"COMMON"
        }'
```
, где
* message - текст сообщения.
* chatName - в какой чат писать.
